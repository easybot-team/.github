# EasyBot Team 工作流程

## 一.开发要求

### 1.1 分支策略

| 分支类型  |                 内容                 | 创建权限 | 推送权限 | 合并权限 | 强制推送 | 删除权限 |
| :-------: | :----------------------------------: | :------: | :------: | :------: | :------: | :------: |
|  master   |     稳定发布分支，仅用于发布版本     |  管理员  | 禁止推送 | PR+审核  |   禁止   |   禁止   |
|  develop  | 主开发分支，包含下一个版本的所有功能 | 开发者+  | 维护者+  |    PR    |   禁止   |  管理员  |
| feature/* |       特性分支，用于开发新功能       |  所有人  |  创建者  | PR/直接  |   允许   |   允许   |
|   fix/*   |        修复分支，用于修复 bug        | 开发者+  | 维护者+  |    PR    |   禁止   |  管理员  |

### 1.2 开发流程

### 1.2.1 确定需求和目标

- 对于任何的想法要和团队内成员**沟通交流**，**严禁**私自开发
- 在开发前要确定**市场需求**、**开发目标**、**最终成果**和**预定时间**

### 1.2.2 IDE要求

- **All Jetbrains's Product** —— **Jetbrain 全家桶**
- **AI集成IDE**

> **注意**：正确的使用**AI**集成IDE

### 1.2.3 开发前

- 根据***1.1 分支策略***，开发前应该创建形如**feature/***的新分支

### 1.2.4 开发时

#### 1.2.4.1 命名规范

- Java 代码规范（**4 空格缩进，120 字符行宽**）

- 统一的命名约定（**CamelCase**）

- 尽量**详细**的注释

#### 1.2.4.2 维护性

- 做好**模块化**、**易拓展**工作
- 减少**TODO**
- 使用健全的**Try-Catch**防止大型崩溃

#### 1.2.4.3 测试

- 做好充足的**构建测试**、**功能测试**、**性能测试**准备
- 杜绝在开发阶段能发现的**错误**

### 1.2.5 开发后

#### 1.2.5.1 提交

- 约定commit提交格式，如下表

  | 类型         | 说明                                    | 示例                           |
  | :----------- | :-------------------------------------- | :----------------------------- |
  | **feat**     | 新功能（feature）                       | `feat: 添加用户登录功能`       |
  | **fix**      | Bug修复                                 | `fix: 修复登录页面的样式问题`  |
  | **docs**     | 文档更新                                | `docs: 更新README安装说明`     |
  | **style**    | 代码格式（不影响代码运行的变动）        | `style: 格式化用户模型代码`    |
  | **refactor** | 代码重构（既不是新功能，也不是bug修复） | `refactor: 重构用户认证模块`   |
  | **perf**     | 性能优化                                | `perf: 优化图片懒加载性能`     |
  | **test**     | 测试相关                                | `test: 添加用户服务单元测试`   |
  | **build**    | 构建系统或外部依赖的更改                | `build: 更新webpack配置`       |
  | **ci**       | CI/CD配置和脚本的更改                   | `ci: 添加GitHub Actions工作流` |
  | **chore**    | 其他修改（不修改源码或测试文件）        | `chore: 更新依赖包版本`        |
  | **revert**   | 回滚提交                                | `revert: 回滚错误的配置更改`   |

- 要求重复的修改提交不超过**5个Commit**

#### 1.2.5.2 合并

- 确认代码**无明显**漏洞，符合**开发时**要求后，向主开发分支**develop**提交**PR**，详见***2.1 PR规范***
- 提交PR后，在**GitHub**或者**开发群**内至少@**两位**成员审查

### 1.2.6 最后工作

- 确认代码通过***2.2 PR流程***，合并到**develop**后，向仓库**管理员**申请**删除**该**feature/***特性分支

## 二. 代码审查

### 2.1 PR规范

#### 2.1.1 PR格式规范

- 详细叙述**更新/修复**内容
- @**至少两位**仓库内其他开发者审查
- 最好使用优雅的**Markdown**编写报告

#### 2.1.2 PR合并格式

对于**feature**向**develop**的PR，使用**普通合并**（**Merge commit**）

对于**develop**向**master**的PR，使用**压缩合并**（**Squash and merge**）

### 2.2 PR流程

#### 2.2.1 审查者

- 审查者必须是在团队内工作了**一段时间**，有**丰富经验**的**中高级开发者**
- 审查者的工作是针对PR**提出建议**，在审查阶段截断**大部分的问题**

#### 2.2.2 测试者 (暂无法实现)

- 测试者的工作是针对通过审查的代码进行严格测试，在测试阶段截断绝大部分的问题

#### 2.2.3 PR审查流程

- 接收到PR请求后，作为**审查者**的成员应该**及时**标记自己为**Code viewer**(**以下简称CV**)，为PR添加**标签**
- 当**所有CV**给出**LGTM**时，审查阶段结束。
- 测试者应**及时**展开测试，当测试者**完成测试**，给出**LGTM**后，测试阶段结束。
- **两个阶段**结束后，根据***2.1.2 PR合并格式***进行PR**合并**

------

**版本**：1.0.2.0000

**更新日期**：2025-12-06  

**适用范围**：EasyBot 项目团队
